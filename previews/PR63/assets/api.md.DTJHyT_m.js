import{_ as i,c as a,a5 as t,o as n}from"./chunks/framework.DPfP8Dzq.js";const c=JSON.parse('{"title":"API","description":"","frontmatter":{},"headers":[],"relativePath":"api.md","filePath":"api.md","lastUpdated":null}'),e={name:"api.md"};function p(h,s,l,r,k,d){return n(),a("div",null,s[0]||(s[0]=[t(`<h1 id="API" tabindex="-1">API <a class="header-anchor" href="#API" aria-label="Permalink to &quot;API {#API}&quot;">​</a></h1><p>This is a list of documentation associated with every single <strong>exported</strong> function from <code>OMOPCDMPathways</code>. There are a few different sections with a brief explanation of what these sections are followed by relevant functions.</p><h2 id="Pre-Processing" tabindex="-1">Pre-Processing <a class="header-anchor" href="#Pre-Processing" aria-label="Permalink to &quot;Pre-Processing {#Pre-Processing}&quot;">​</a></h2><p>This family of functions are dedicated to pre-process the Data.</p><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="OMOPCDMPathways.period_prior_to_index" href="#OMOPCDMPathways.period_prior_to_index">#</a> <b><u>OMOPCDMPathways.period_prior_to_index</u></b> — <i>Function</i>. <p><strong>Example:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>period_prior_to_index(</span></span>
<span class="line"><span>    cohort_id = [1, 1, 1, 1, 1], </span></span>
<span class="line"><span>    conn; </span></span>
<span class="line"><span>    date_prior = Day(100), </span></span>
<span class="line"><span>    tab=cohort</span></span>
<span class="line"><span>)</span></span></code></pre></div><p><strong>Implemetation:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>(1) Constructs a SQL query to select cohort_definition_id, subject_id, and cohort_start_date from a specified table, filtering by cohort_id.</span></span>
<span class="line"><span>(2) Executes the constructed SQL query using a database connection, fetching the results into a DataFrame.</span></span>
<span class="line"><span>(3) If the DataFrame is not empty, converts cohort_start_date to DateTime and subtracts date_prior from each date, then returns the modified DataFrame.</span></span></code></pre></div><p>Given <code>cohort_id&#39;s</code> , return a <code>DataFrame</code> with the <code>cohort_start_date</code> adjusted to prior each subjects&#39; cohort entry date (i.e. their <code>cohort_start_date</code>)</p><p><strong>Arguments:</strong></p><ul><li><p><code>cohort_id</code> - vector of cohort IDs</p></li><li><p><code>conn</code> - database connection</p></li></ul><p><strong>Keyword Arguments:</strong></p><ul><li><p><code>date_prior::Dates.AbstractTime</code> - how much time prior the index date should be adjusted by; accepts a <code>Dates.AbstractTim</code>e object such as <code>Day</code>, <code>Month</code>, etc. (Default: <code>Day(100)</code>)</p></li><li><p><code>tab</code> - the <code>SQLTable</code> representing the cohort table. (Default: <code>cohort</code>)</p></li></ul><p><strong>Returns</strong></p><ul><li>DataFrame with the <code>cohort_start_date</code> adjusted by the <code>date_prior</code>.</li></ul><p><a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/blob/3d9a9eb2e13dda7c20da22d38ab592ab4faeb6b9/src/preprocessing.jl#L3-L34" target="_blank" rel="noreferrer">source</a></p><p>#Example:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>function start_date_on_person(cohort_id::Vector, tables, conn)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    tab = tables[:cohort]</span></span>
<span class="line"><span>    date_prior = Day(100)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    sql = From(tab) |&gt;</span></span>
<span class="line"><span>    Where(Fun.in(Get.cohort_definition_id, cohort_id...)) |&gt;</span></span>
<span class="line"><span>    Select(Get.cohort_definition_id, Get.subject_id, Get.cohort_start_date) |&gt;</span></span>
<span class="line"><span>    q -&gt; render(q, dialect = :sqlite)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    df = DBInterface.execute(conn, String(sql)) |&gt; DataFrame</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    # Check if the DataFrame is not empty</span></span>
<span class="line"><span>    if nrow(df) &gt; 0</span></span>
<span class="line"><span>        # Convert the cohort_start_date to DateTime and subtract the date_prior</span></span>
<span class="line"><span>        df.cohort_start_date = DateTime.(df.cohort_start_date) .- date_prior</span></span>
<span class="line"><span>    else</span></span>
<span class="line"><span>        error(&quot;Invalid DataFrame&quot;)</span></span>
<span class="line"><span>    end</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    return df</span></span>
<span class="line"><span>end</span></span></code></pre></div><ul><li><p><code>treatment_history::DataFrame</code> - treatment history dataframe.</p></li><li><p><code>minEraDuration::Real</code> - minimum duration of an era.</p></li></ul><p><strong>Returns:</strong></p><ul><li>Updated <code>DataFrame</code>, rows where the difference between <code>drug_exposure_start</code> and <code>drug_exposure_end</code> is less than <code>minEraDuration</code> are filtered out. period_prior_to_index( cohort_id = [1, 1, 1, 1, 1], index_date_func = start_date_on_person, conn; )</li></ul><p><strong>Implementation:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>(1) Calls GenerateTables with the database connection conn to generate tables, specifying inplace = false and exported = true.</span></span>
<span class="line"><span>(2) Invokes the index_date_func function, passing cohort_id, the generated tables, and the connection conn, to obtain a DataFrame df.</span></span>
<span class="line"><span>(3) Returns the DataFrame df.</span></span></code></pre></div><p>It filters the treatment history <code>DataFrame</code> to retain only those rows where the duration between <code>drug_exposure_end</code> and <code>drug_exposure_start</code> is at least <code>minEraDuration</code>.</p><p>function period_prior_to_index(person_ids::Vector, index_date_func::Function, conn; date_prior=Day(100))</p><p>Given a vector of person IDs, this function returns a DataFrame with the cohort_start_date adjusted by the date_prior.</p><p><strong>Arguments:</strong></p><ul><li><p><code>cohort_id</code> - vector of cohort IDs</p></li><li><p><code>index_date_func</code> - function that returns the SQL query to get the start date of the person</p></li><li><p><code>conn</code> - database connection</p></li></ul><p><strong>Returns</strong></p><ul><li>DataFrame with the <code>cohort_start_date</code> adjusted by the <code>date_prior</code>.</li></ul><p><a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/blob/3d9a9eb2e13dda7c20da22d38ab592ab4faeb6b9/src/preprocessing.jl#L53-L114" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="OMOPCDMPathways.EraCollapse" href="#OMOPCDMPathways.EraCollapse">#</a> <b><u>OMOPCDMPathways.EraCollapse</u></b> — <i>Function</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">EraCollapse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    treatment_history</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    eraCollapseSize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Int</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Given a treatment history dataframe, this function collapses eras that are separated by a gap of size &lt;= <code>eraCollapseSize</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>treatment_history::DataFrame</code> - treatment history dataframe.containing drug_exposure_start and drug_exposure_end</p></li><li><p><code>eraCollapseSize::Int</code> - maximum gap size for collapsing eras.</p></li></ul><p><strong>Returns:</strong></p><ul><li>Updated dataframe, eras collapsed based on the specified gap size.</li></ul><p><strong>Note:</strong></p><p>This is how the overall algorithm for this function is defined</p><ol><li><p>Sorts the dataframe by event_start_date and event_end_date.</p></li><li><p>Calculates the gap between each era and the previous era.</p></li><li><p>Filters out rows with gap_same &gt; eraCollapseSize.</p></li></ol><p>It filters the treatment history <code>DataFrame</code> to retain only those rows where the duration between <code>drug_exposure_end</code> and <code>drug_exposure_start</code> is at least <code>minEraDuration</code>.</p><p><strong>Example:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_person_ids </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_start_date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.727296e8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.90304e7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5.333472e8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.18208e7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.3291776e9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_end_date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">364953600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31449600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">532483200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80006400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1330387200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]];</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DataFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_person_ids, drug_exposure_start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_start_date, drug_exposure_end </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_end_date)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EraCollapse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(treatment_history </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_df, eraCollapseSize </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 400000000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DataFrame</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Row │ person_id  drug_exposure_start  drug_exposure_end  gap_same   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     │ Int64      Float64              Int64              Float64    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">─────┼───────────────────────────────────────────────────────────────</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5.33347e8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">         -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">532483200</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.86373e9</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.7273e8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">364953600</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1.59754e8</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.18208e7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80006400</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2.83133e8</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            2.90304e7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           31449600</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1.09037e8</span></span></code></pre></div><p><a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/blob/3d9a9eb2e13dda7c20da22d38ab592ab4faeb6b9/src/preprocessing.jl#L131-L183" target="_blank" rel="noreferrer">source</a></p></div><br><div style="border-width:1px;border-style:solid;border-color:black;padding:1em;border-radius:25px;"><a id="OMOPCDMPathways.calculate_era_duration" href="#OMOPCDMPathways.calculate_era_duration">#</a> <b><u>OMOPCDMPathways.calculate_era_duration</u></b> — <i>Function</i>. <div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">calculate_era_duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    treatment_history</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DataFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minEraDuration</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Real</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Given a treatment history dataframe, this function filters out rows where the difference between <code>drug_exposure_start</code> and <code>drug_exposure_end</code> is less than <code>minEraDuration</code>.</p><p><strong>Arguments:</strong></p><ul><li><p><code>treatment_history::DataFrame</code> - treatment history dataframe.</p></li><li><p><code>minEraDuration::Real</code> - minimum duration of an era.</p></li></ul><p><strong>Returns:</strong></p><ul><li>Updated <code>DataFrame</code>, rows where the difference between <code>drug_exposure_start</code> and <code>drug_exposure_end</code> is less than <code>minEraDuration</code> are filtered out.</li></ul><p><strong>Note:</strong></p><p>It filters the treatment history <code>DataFrame</code> to retain only those rows where the duration between <code>drug_exposure_end</code> and <code>drug_exposure_start</code> is at least <code>minEraDuration</code>.</p><p><strong>Example:</strong></p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_person_ids </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_start_date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.727296e8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.90304e7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5.333472e8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.18208e7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.3291776e9</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_end_date </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">364953600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">31449600</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">532483200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80006400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1330387200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_df </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> DataFrame</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(person_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_person_ids, drug_exposure_start </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_start_date, drug_exposure_end </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_drug_end_date);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">julia</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> calculate_era_duration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(test_df, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">920000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">×</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DataFrame</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Row │ person_id  drug_exposure_start  drug_exposure_end </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     │ Int64      Float64              Int64             </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">─────┼───────────────────────────────────────────────────</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.7273e8</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">364953600</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            2.90304e7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">           31449600</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">           -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.18208e7</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          -</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">80006400</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> │         </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            1.32918e9</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         1330387200</span></span></code></pre></div><p><a href="https://github.com/JuliaHealth/OMOPCDMPathways.jl/blob/3d9a9eb2e13dda7c20da22d38ab592ab4faeb6b9/src/preprocessing.jl#L198-L243" target="_blank" rel="noreferrer">source</a></p></div><br>`,10)]))}const g=i(e,[["render",p]]);export{c as __pageData,g as default};
